(function(){var e={9925:function(){},6807:function(e,t,s){"use strict";var i=s(6896),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},r=[],o=s(9925),l=s.n(o),n=l(),c=s(845),u=(0,c.A)(n,a,r,!1,null,null,null),p=u.exports,d=s(8146),m=(s(4114),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"blur"}),t("div",{staticClass:"container"},[t("h1",[e._v("文件上传和打印")]),t("el-table",{staticClass:"file-list",attrs:{"max-height":"260","highlight-current-row":"",data:e.fileList},on:{"current-change":t=>{e.rFile=t}}},[t("el-table-column",{attrs:{prop:"filename",label:"文件名"}}),t("el-table-column",{attrs:{align:"center",width:"50px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top-end",width:"160"},model:{value:e.visible[s.$index],callback:function(t){e.$set(e.visible,s.$index,t)},expression:"visible[scope.$index]"}},[t("p",[e._v("确定删除吗？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$set(e.visible,s.$index,!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.$set(e.visible,s.$index,!1),e.handleDelete(s.$index,s.row)}}},[e._v("确定")])],1),t("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",size:"mini",type:"danger",circle:""},slot:"reference"})],1)]}}])})],1),t("div",{staticClass:"file-input"},[t("el-upload",{staticClass:"upload-demo",attrs:{limit:e.fileLimit,drag:"",action:"/upload",multiple:"","on-exceed":e.handleExceed,"before-upload":e.beforeUpload,"http-request":e.uploadFile}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(e.fileType.join("/"))+"文件，且不超过50mb")])])],1),t("div",{staticClass:"button-container"},[t("el-button",{attrs:{type:"primary",size:"large",icon:"el-icon-printer"},on:{click:e.handlePrint}}),t("el-button",{attrs:{type:"primary"},on:{click:e.handlePreview}},[e._v("预览")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"admin"==e.userRole,expression:'userRole == "admin"'}],attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/dashboard")}}},[e._v("控制台")]),e.isLogin?t("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("登出")]):t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1),t("el-dialog",{attrs:{title:"预览",top:"5vh",visible:e.previewDialogVisible,width:"80vw",modal:!1,"modal-append-to-body":!1,"append-to-body":!1,"before-close":()=>{e.previewClose()}},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[t("iframe",{attrs:{title:"preview",src:e.previewSrc,frameborder:"0"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.window.open(e.previewSrc)}}},[e._v("新窗口打开")]),t("el-button",{attrs:{type:"primary"},on:{click:e.previewClose}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"打印预览",top:"5vh",visible:e.printDialogVisible,width:"80vw",modal:!1,"modal-append-to-body":!1,"append-to-body":!1,"before-close":()=>{e.previewClose()}},on:{"update:visible":function(t){e.printDialogVisible=t}}},[t("iframe",{attrs:{title:"printPreview",src:e.previewSrc,frameborder:"0"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.previewClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.printFile(),e.previewClose()}}},[e._v("确定")])],1)])],1)}),h=[],g=(s(4603),s(7566),s(8721),{name:"IndexView",data(){return{isLogin:0,username:"",userRole:"",file:null,rFile:{timestamp:null},error:null,fileList:[],fileType:["pdf","doc","docx","png","jpg"],fileSize:50,fileLimit:0,pages:0,visible:[],previewDialogVisible:!1,printDialogVisible:!1,previewSrc:""}},methods:{beforeUpload(e){if(""!=e.type||null!=e.type||void 0!=e.type){const t=e.name.replace(/.+\./,"").toLowerCase(),s=e.size/1024/1024<50;return s?this.fileType.includes(t)?(console.log(`${e.name}文件格式合法`),!0):(this.$message.error("文件格式不正确!"),!1):(this.$message("上传文件大小不能超过 50MB!"),!1)}},handleExceed(){this.$message({type:"warning",message:"超出最大上传文件数量的限制！"})},async uploadFile(e){this.file=e.file;const t=new FormData;t.append("file",this.file,encodeURIComponent(this.file.name));try{const e=await this.$axios.post("/api/upload",t,{headers:{Authorization:localStorage.getItem("token")}});200===e.status?(this.$message({message:"上传成功",type:"success"}),this.fileList.push(e.data)):this.$message.error("上传失败")}catch(s){this.$message.error("上传失败",s)}},async handleDelete(e,t){try{const e=await this.$axios.post("/api/files/delete",t,{headers:{Authorization:localStorage.getItem("token")}});200===e.status?(this.$message({message:"删除成功",type:"success"}),this.fileList=this.fileList.filter((e=>e.timestamp!=t.timestamp)),t.timestamp==this.rFile.timestamp&&(this.rFile={timestamp:null})):this.$message.error("删除失败")}catch(s){}},getPreview(){if(!this.rFile||!this.rFile.timestamp)throw this.$message({message:"请先选择文件",type:"warning"}),new Error("请先选择文件");return this.$axios.get("/api/files/preview",{params:this.rFile,responseType:"blob",headers:{Authorization:localStorage.getItem("token")}}).then((e=>{this.previewSrc=window.URL.createObjectURL(e.data)}))},previewClose(){window.URL.revokeObjectURL(this.previewSrc),this.previewDialogVisible=!1,this.printDialogVisible=!1},async handlePreview(){try{await this.getPreview(),this.$message({message:"预览获取成功",type:"success"}),this.previewDialogVisible=1}catch(e){console.log(e)}},async handlePrint(){try{await this.getPreview(),this.$message({message:"预览获取成功",type:"success"}),this.printDialogVisible=1}catch(e){console.log(e)}},async printFile(){if(!this.rFile.timestamp)return this.$message({message:"请先选择文件",type:"warning"});try{const e=await this.$axios.post("/api/print",this.rFile,{headers:{Authorization:localStorage.getItem("token")}});if(200===e.status){this.pages=e.data.pages,console.log("pages:"+this.pages),this.$message({message:`打印成功,共${this.pages}页`,type:"success"});const t=this.$createElement;this.$msgbox({title:"已通知打印机",message:t("p",null,[t("p",null,`一共${this.pages}张，每张0.1元，共${.1*this.pages}元`),t("p",null,[t("img",{style:"width:50%",attrs:{src:s(6096)}},""),t("img",{style:"width:50%",attrs:{src:s(7407)}},"")])]),confirmButtonText:"我知道了"}).then((e=>{console.log(e)}))}else this.$message.error("打印失败")}catch(e){console.log(e),this.$message.error("打印失败")}},async login(){this.$router.push("/login")},async getFileList(){try{const e=await this.$axios.get("/api/files/allFiles",{headers:{Authorization:localStorage.getItem("token")}});200===e.status?(this.$message({message:"文件获取成功",type:"success"}),this.fileList=e.data):this.$message.error("文件获取失败")}catch(e){this.$message.error("文件获取失败")}},logout(){this.$message({message:"退出登录",type:"warning"}),localStorage.removeItem("token"),this.isLogin=0,setTimeout((()=>{location.reload()}),1e3)}},computed:{},created(){},async mounted(){if(null==localStorage.getItem("token"))return this.$notify({title:"警告",message:"您没有登陆",type:"warning",duration:0});try{const e=await this.$axios.get("/api/vertify",{headers:{Authorization:localStorage.getItem("token")}});200===e.status?(this.isLogin=1,({username:this.username,userRole:this.userRole}=e.data),this.$message({message:"欢迎登录, 用户"+this.username,type:"success"}),await this.getFileList()):this.$notify({title:"警告",message:"Token已过期，请重新登陆",type:"warning",duration:0})}catch(t){}const e=this.$createElement;this.$msgbox({title:"重要通知",message:e("p",null,[e("p",null,"虽然后端支持了使用libreOffice转化doc和docx文档成pdf打印，但libreOffice转化的格式不一定准确,所以"),e("p",null,[e("strong",{style:{color:"red",fontSize:"18px"}},"打印前一定要预览")]),e("p",null,[e("span",null,"如果格式不理想请到"),e("a",{attrs:{target:"_blank",href:"https://smallpdf.com/pdf-converter"}},"这里"),e("span",null,"手动转换成pdf再上传打印")])]),confirmButtonText:"我知道了"}).then((e=>{console.log(e)}))}}),f=g,v=s(4532),b=s.n(v),w=(0,c.A)(f,m,h,!1,null,null,null);"function"===typeof b()&&b()(w);var y=w.exports,x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"containor"},[t("div",{attrs:{id:"body"}},[t("span",{attrs:{id:"load"}},[e._v("登录")]),t("span",{staticClass:"alert"},[e._v("123")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("span",{attrs:{id:"username"}},[t("p",[e._v("账号")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),t("span",{attrs:{id:"password"}},[t("p",[e._v("密码")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{attrs:{type:"submit",id:"login"}},[e._v("登录")]),t("div",{attrs:{id:"register"},on:{click:e.register}},[t("span",[e._v("账号注册")])])])])])},$=[],_={data(){return{username:"",password:""}},mounted(){this.al=document.querySelector(".alert")},methods:{async login(){try{const e=await this.$axios.post("/api/users/login",{username:this.username,password:this.password});this.al.innerHTML="登陆成功",this.showAlert1(),setTimeout((()=>{this.$router.push("/")}),800),console.log(e.data),localStorage.setItem("token",e.data.token)}catch(e){this.al.innerHTML="登录失败",this.showAlert2(),console.error(e)}},register(){this.$router.push({path:"/register"})},showAlert1(){this.al.style.transition="0s",this.al.style.backgroundColor="rgba(0, 128, 0,0.4)",this.al.style.color="green",this.al.style.transform="translateY(20px)",setTimeout((()=>{this.al.style.transition="0.2s",this.al.style.opacity=1,this.al.style.transform="translateY(0px)"}),1),setTimeout((()=>{this.al.style.opacity=0,this.al.style.transform="translateY(-20px)"}),600)},showAlert2(){this.al.classList.add("shake"),setTimeout((()=>{this.al.classList.remove("shake")}),1e3)}}},k=_,C=(0,c.A)(k,x,$,!1,null,"6137b39e",null),F=C.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"containor"},[t("div",{attrs:{id:"body"}},[t("span",{attrs:{id:"load"}},[e._v("注册")]),t("span",{staticClass:"alert"},[e._v("123")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[t("span",{attrs:{id:"username"}},[t("p",[e._v("账号")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),t("span",{attrs:{id:"password"}},[t("p",[e._v("密码")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"输入密码",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("span",{attrs:{id:"check"}},[t("p",[e._v("再次输入密码")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.check,expression:"check"}],attrs:{type:"password",placeholder:"确认密码",required:""},domProps:{value:e.check},on:{input:function(t){t.target.composing||(e.check=t.target.value)}}})]),t("button",{attrs:{type:"submit",id:"login"}},[e._v("注册")])])])])},L=[],T={data(){return{username:"",password:"",userRole:"user",check:""}},mounted(){this.al=document.querySelector(".alert")},methods:{async register(){try{if(this.password!=this.check)this.al.innerHTML="两次密码不同",this.showAlert2();else{const e=await this.$axios.post("/api/users/register",{username:this.username,password:this.password,userRole:this.userRole});this.al.innerHTML="注册成功",this.showAlert1(),setTimeout((()=>{this.$router.push({path:"/login"})}),800),console.log(e.data)}}catch(e){this.al.innerHTML="注册失败",this.showAlert2(),console.error(e)}},showAlert1(){this.al.style.transition="0s",this.al.style.backgroundColor="rgba(0, 128, 0,0.4)",this.al.style.color="green",this.al.style.transform="translateY(20px)",setTimeout((()=>{this.al.style.transition="0.2s",this.al.style.opacity=1,this.al.style.transform="translateY(0px)"}),1),setTimeout((()=>{this.al.style.opacity=0,this.al.style.transform="translateY(-20px)"}),600)},showAlert2(){this.al.classList.add("shake"),setTimeout((()=>{this.al.classList.remove("shake")}),1e3)}}},D=T,A=(0,c.A)(D,S,L,!1,null,null,null),z=A.exports,P=function(){var e=this,t=e._self._c;return t("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"auto"}},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":"1",collapse:e.isCollapse}},[e.isCollapse?t("el-button",{staticClass:"el-icon-s-fold",staticStyle:{width:"100%"},on:{click:function(t){e.isCollapse=!1}}}):t("el-button",{staticClass:"el-icon-s-unfold",staticStyle:{width:"100%"},on:{click:function(t){e.isCollapse=!0}}}),t("el-menu-item",{attrs:{index:"/user"}},[t("i",{staticClass:"el-icon-user"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户管理")])]),t("el-menu-item",{attrs:{index:"/log"}},[t("i",{staticClass:"el-icon-document"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("打印记录")])]),t("el-menu-item",{attrs:{index:"/file"}},[t("i",{staticClass:"el-icon-folder-opened"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("文件管理")])]),t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("测试项")])])],2)],1)],1),t("el-container",[t("el-main",[t("router-view")],1)],1)],1)},R=[],O={data(){return{isCollapse:!1}},async mounted(){try{const e=await this.$axios.get("/api/vertify",{headers:{Authorization:localStorage.getItem("token")}});200===e.status&&this.$message({message:"自动登录成功",type:"success"})}catch(e){console.log(e)}}},U=O,H=(0,c.A)(U,P,R,!1,null,null,null),I=H.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%","max-width":"800px",margin:"auto auto"}},[t("h1",[e._v("用户管理")]),t("el-table",{attrs:{"max-height":e.viewHeight-160,data:e.users}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"40"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"userRole",label:"权限"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser(s.row)}}},[e._v("编辑")]),t("el-popover",{attrs:{placement:"top-end",width:"160"},model:{value:e.visible_userDelete[s.$index],callback:function(t){e.$set(e.visible_userDelete,s.$index,t)},expression:"visible_userDelete[scope.$index]"}},[t("p",[e._v("确定删除吗？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$set(e.visible_userDelete,s.$index,!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.$set(e.visible_userDelete,s.$index,!1),e.deleteUser(s.row)}}},[e._v("确定")])],1),t("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",type:"danger"},slot:"reference"})],1)]}}])})],1),t("el-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")]),t("el-dialog",{attrs:{visible:e.addDialogVisible,title:"添加用户",width:"70%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[t("el-form",{attrs:{model:e.userForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),t("el-form-item",{attrs:{label:"权限"}},[t("el-select",{attrs:{placeholder:"选择用户身份"},model:{value:e.userForm.userRole,callback:function(t){e.$set(e.userForm,"userRole",t)},expression:"userForm.userRole"}},[t("el-option",{attrs:{label:"管理员",value:"admin"}}),t("el-option",{attrs:{label:"普通用户",value:"user"}}),t("el-option",{attrs:{label:"访客",value:"guest",disabled:!0}})],1)],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确定")])],1)],1)],1)},V=[],E={data(){return{users:[],addDialogVisible:!1,userForm:{username:"",password:"",userRole:""},visible_userDelete:[],viewHeight:window.innerHeight}},methods:{addUser(){return this.userForm.username?this.userForm.userRole?this.userForm.password?void this.$axios.post("/api/manage/add",this.userForm,{headers:{Authorization:localStorage.getItem("token")}}).then((e=>{this.$message({message:"添加成功",type:"success"}),this.users.push(e.data),Object.keys(this.userForm).forEach((e=>{this.userForm[e]=null})),this.addDialogVisible=!1})).catch((e=>{console.log(e),this.$message.error("添加失败")})):this.$message.error("请输入用户密码"):this.$message.error("请选择用户权限"):this.$message.error("请输入用户名")},editUser(e){console.log("编辑用户",e)},deleteUser(e){if(e.username==this.username)return this.$message.error("无法删除当前登录账号"),console.log("无法删除当前登录账号");this.$axios.post("/api/manage/delete",{rUsername:e.username},{headers:{Authorization:localStorage.getItem("token")}}).then((t=>{console.log(t),this.users=this.users.filter((t=>t.username!==e.username)),this.$message({message:"删除成功",type:"success"})})).catch((e=>{console.log(e),this.$message.error("删除失败")}))},getUsers(){this.$axios.get("/api/manage/allUsers",{headers:{Authorization:localStorage.getItem("token")}}).then((e=>{this.users=e.data})).catch((e=>{console.log(e),this.$message.error("获取失败")}))}},created(){window.addEventListener("resize",(()=>{this.viewHeight=window.innerHeight}))},async mounted(){this.getUsers()}},M=E,q=s(5971),N=s.n(q),Y=(0,c.A)(M,j,V,!1,null,null,null);"function"===typeof N()&&N()(Y);var B=Y.exports,G=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("打印记录")]),t("div",[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateTimePick,callback:function(t){e.dateTimePick=t},expression:"dateTimePick"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.getPrintLogs}},[e._v("查询")])],1),t("el-table",{attrs:{"max-height":e.viewHeight-200,"show-summary":"",data:e.printLogs}},[t("el-table-column",{attrs:{prop:"printTimestamp",label:"时间",sortable:""}}),t("el-table-column",{attrs:{prop:"username",label:"用户",sortable:""}}),t("el-table-column",{attrs:{prop:"filename",label:"文件"}}),t("el-table-column",{attrs:{prop:"pages",label:"页数"}})],1)],1)},J=[],K={data(){return{printLogs:[],dateTimePick:null,viewHeight:window.innerHeight}},methods:{getPrintLogs(){if(!this.dateTimePick)return this.$message.error("请选择时间段");this.$axios.get("/api/manage/printLogs",{params:this.dateTimePick.map((e=>e.getTime())),headers:{Authorization:localStorage.getItem("token")}}).then((e=>{this.printLogs=e.data})).catch((e=>{console.log(e),this.$message.error("获取失败")}))}},created(){window.addEventListener("resize",(()=>{this.viewHeight=window.innerHeight}))},mounted(){}},Q=K,W=(0,c.A)(Q,G,J,!1,null,null,null),X=W.exports,Z=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("文件管理")]),t("el-table",{attrs:{"max-height":e.viewHeight-130,data:e.files}},[t("el-table-column",{attrs:{prop:"timestamp",label:"上传时间",sortable:""}}),t("el-table-column",{attrs:{prop:"filename",label:"文件名"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:""}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadFile(s.row)}}},[e._v("下载")]),t("el-popover",{attrs:{placement:"top-end",width:"160"},model:{value:e.visible_fileDelete[s.$index],callback:function(t){e.$set(e.visible_fileDelete,s.$index,t)},expression:"visible_fileDelete[scope.$index]"}},[t("p",[e._v("确定删除吗？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$set(e.visible_fileDelete,s.$index,!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.$set(e.visible_fileDelete,s.$index,!1),e.deleteFile(s.row)}}},[e._v("确定")])],1),t("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",type:"danger"},slot:"reference"})],1)]}}])})],1)],1)},ee=[],te={data(){return{files:[],visible_fileDelete:[],viewHeight:window.innerHeight}},methods:{getFiles(){this.$axios.get("/api/manage/allFiles",{headers:{Authorization:localStorage.getItem("token")}}).then((e=>{this.files=e.data})).catch((e=>{console.log(e),this.$message.error("文件列表获取失败")}))},downloadFile(e){this.$axios.get("/api/manage/getFile",{params:e,responseType:"blob",headers:{Authorization:localStorage.getItem("token")}}).then((t=>{const s=window.URL.createObjectURL(t.data),i=document.createElement("a");i.href=s,i.download=e.filename,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s)})).catch((e=>{console.log(e),console.log(e),this.$message.error("下载失败")}))},deleteFile(e){console.log(e)}},created(){window.addEventListener("resize",(()=>{this.viewHeight=window.innerHeight}))},mounted(){this.getFiles()}},se=te,ie=(0,c.A)(se,Z,ee,!1,null,null,null),ae=ie.exports;i["default"].use(d.Ay);const re=[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:y},{path:"/login",name:"login",component:F},{path:"/register",name:"register",component:z},{path:"/dashboard",name:"dashboard",component:I,children:[{path:"/",redirect:"/user"},{path:"/user",name:"user",component:B},{path:"/log",name:"log",component:X},{path:"/file",name:"file",component:ae}]}],oe=new d.Ay({routes:re});var le=oe,ne=s(4455),ce=s.n(ne),ue=s(5984);i["default"].use(ce()),i["default"].prototype.$axios=ue.A,i["default"].config.productionTip=!1,new i["default"]({router:le,render:e=>e(p)}).$mount("#app")},5971:function(){},4532:function(){},6096:function(e,t,s){"use strict";e.exports=s.p+"img/Receive1.80e4010d.jpg"},7407:function(e,t,s){"use strict";e.exports=s.p+"img/Receive2.408eafa0.jpg"}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,i,a,r){if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var l=!0,n=0;n<i.length;n++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[n])}))?i.splice(n--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,o=i[0],l=i[1],n=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(n)var u=n(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},i=self["webpackChunkprinter_serve"]=self["webpackChunkprinter_serve"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(6807)}));i=s.O(i)})();
//# sourceMappingURL=app.055e41c4.js.map